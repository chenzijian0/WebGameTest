<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head>
    <meta charset="utf-8">
    <meta name="author" content="Kodinger">
    <title>RegisterPage</title>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"
          th:href="@{/webjars/bootstrap/4.4.1-1/css/bootstrap.css}">
    <link rel="stylesheet" type="text/css" href="css/my-login.css" th:href="@{css/my-login.css}">
</head>
<body class="my-login-page">
<section class="h-100">
    <div class="container h-100">
        <div class="row justify-content-md-center h-100">
            <div class="card-wrapper">
                <div class="brand">
                    <img src="img/logo.jpg" th:src="@{/img/Tiny.png}">
                </div>
                <div class="card fat">
                    <div class="card-body">
                        <h4 class="card-title">Register</h4>
                        <form method="POST" th:action="'/register'">

                            <div class="form-group">
                                <label for="name">Name</label>
                                <input id="name" type="text" class="form-control " name="name" required autofocus>
                            </div>

                            <div class="form-group">
                                <label for="account" th:text="'Account number'">E-Mail Address</label>
                                <input id="account" type="number" class="form-control account" name="email"
                                       th:name="'account' "
                                       required>
                            </div>

                            <div class="form-group">
                                <label for="password">Password</label>
                                <input id="password" type="password" class="form-control password" name="pwd" required
                                       data-eye>
                            </div>

                            <div class="form-group">
                                <label>
                                    <!--										<input type=text name="aggree" value="1" th:text="${session.Error}" th:if="${#strings.isEmpty(Error)==true}">-->
                                    <a th:text="${Error}" th:if="${#strings.isEmpty(Error)==true}"/>
                                </label>
                            </div>

                            <div class="form-group no-margin">
                                <button type="button" class="btn btn-primary btn-block submitButton">
                                    Register
                                </button>
                            </div>
                            <div class="margin-top20 text-center">
                                Already have an account? <a href="index.html">Login</a>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="footer">
                </div>
            </div>
        </div>
    </div>
</section>

<script src="js/jquery.min.js" th:src="@{/webjars/jquery/3.5.0/jquery.js}"></script>
<script src="bootstrap/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/4.4.1-1/js/bootstrap.js}"></script>
<script src="js/my-login.js" th:src="@{/js/my-login.js}"></script>
<script>
    $(".submitButton").click(function () {
        $.ajax({
            type: "POST",
            url: "/register",
            // contentType: "application/json;charset=UTF-8",
            // dataType:"json",
            data: {
                "name": $("#name").val(),
                "account": $(".account").val(),
                "pwd": $(".password").val()
            },
            success: function (msg) {
                if (msg == "OK") {
                    alert("注册成功");
                    location.replace("/index.html");
                } else {
                    alert(msg);

                }
            }
        })
    });

</script>
</body>
</html>